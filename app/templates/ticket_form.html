{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>{{ "Editar Ticket" if ticket else "Crear Ticket" }}</h1>

    <form method="POST">
        <!-- Título -->
        <div class="form-group">
            <label for="titulo">Título</label>
            <input type="text" name="titulo" id="titulo"
                   value="{{ ticket.titulo if ticket else '' }}"
                   required>
        </div>

        <!-- Descripción -->
        <div class="form-group">
            <label for="descripcion">Descripción</label>
            <textarea name="descripcion" id="descripcion" required>{{ ticket.descripcion if ticket else '' }}</textarea>
        </div>

        <!-- Estado -->
        <div class="form-group">
            <label for="estado">Estado</label>
            <select name="estado" id="estado" required>
                {% for e in ['Nuevo', 'Apertura', 'Resuelto', 'Cierre', 'Escalado'] %}
                    <option value="{{ e }}"
                        {% if ticket and ticket.estado == e %}selected{% endif %}>
                        {{ e }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Prioridad -->
        <div class="form-group">
            <label for="prioridad">Prioridad</label>
            <select name="prioridad" id="prioridad" required>
                {% for p in ['Baja', 'Media', 'Alta'] %}
                    <option value="{{ p }}"
                        {% if ticket and ticket.prioridad == p %}selected{% endif %}>
                        {{ p }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Cliente -->
        <div class="form-group">
            <label for="nombre_cliente">Cliente</label>
            <input type="text" name="nombre_cliente" id="nombre_cliente"
                   value="{{ ticket.nombre_cliente if ticket else '' }}"
                   required>
        </div>

        <!-- Teléfono -->
        <div class="form-group">
            <label for="telefono_cliente">Teléfono</label>
            <input type="text" name="telefono_cliente" id="telefono_cliente"
                   value="{{ ticket.telefono_cliente if ticket else '' }}"
                   required>
        </div>

        <!-- Correo -->
        <div class="form-group">
            <label for="correo_cliente">Correo</label>
            <input type="email" name="correo_cliente" id="correo_cliente"
                   value="{{ ticket.correo_cliente if ticket else '' }}"
                   required>
        </div>

        <!-- Tipo de problema -->
        <div class="form-group">
            <label for="tipo_problema">Tipo de problema</label>
            <input type="text" name="tipo_problema" id="tipo_problema"
                   value="{{ ticket.tipo_problema if ticket else '' }}"
                   required>
        </div>

        <!-- Fuente -->
        <div class="form-group">
            <label for="fuente_ticket">Fuente</label>
            <select name="fuente_ticket" id="fuente_ticket" required>
                {% for f in ['Llamada', 'Correo', 'WebChat', 'Presencial'] %}
                    <option value="{{ f }}"
                        {% if ticket and ticket.fuente_ticket == f %}selected{% endif %}>
                        {{ f }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Botón -->
        <button type="submit" class="btn btn-primary">
            {{ "Actualizar" if ticket else "Crear" }}
        </button>
    </form>
</div>
{% endblock %}
