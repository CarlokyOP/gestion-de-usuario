{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>
        {% if ticket %}
            Editar Ticket
        {% else %}
            Crear Ticket
        {% endif %}
    </h1>

    <form method="POST">

        <!-- TÍTULO -->
        <div class="form-group">
            <label>Título</label>
            <input type="text"
                   name="titulo"
                   class="form-control"
                   required
                   value="{{ ticket.titulo if ticket else '' }}">
        </div>

        <!-- DESCRIPCIÓN -->
        <div class="form-group">
            <label>Descripción</label>
            <textarea name="descripcion"
                      class="form-control"
                      required>{{ ticket.descripcion if ticket else '' }}</textarea>
        </div>

        <!-- ESTADO (SELECT) -->
        <div class="form-group">
            <label>Estado</label>
            <select name="estado" class="form-control" required>
                <option value="Nuevo" {% if ticket and ticket.estado == 'Nuevo' %}selected{% endif %}>Nuevo</option>
                <option value="Apertura" {% if ticket and ticket.estado == 'Apertura' %}selected{% endif %}>Apertura</option>
                <option value="Resuelto" {% if ticket and ticket.estado == 'Resuelto' %}selected{% endif %}>Resuelto</option>
                <option value="Cierre" {% if ticket and ticket.estado == 'Cierre' %}selected{% endif %}>Cierre</option>
                <option value="Escalado" {% if ticket and ticket.estado == 'Escalado' %}selected{% endif %}>Escalado</option>
            </select>
        </div>

        <!-- PRIORIDAD -->
        <div class="form-group">
            <label>Prioridad</label>
            <select name="prioridad" class="form-control" required>
                <option value="Baja" {% if ticket and ticket.prioridad == 'Baja' %}selected{% endif %}>Baja</option>
                <option value="Media" {% if ticket and ticket.prioridad == 'Media' %}selected{% endif %}>Media</option>
                <option value="Alta" {% if ticket and ticket.prioridad == 'Alta' %}selected{% endif %}>Alta</option>
            </select>
        </div>

        <!-- CLIENTE -->
        <div class="form-group">
            <label>Nombre Cliente</label>
            <input type="text"
                   name="nombre_cliente"
                   class="form-control"
                   required
                   value="{{ ticket.nombre_cliente if ticket else '' }}">
        </div>

        <div class="form-group">
            <label>Teléfono Cliente</label>
            <input type="text"
                   name="telefono_cliente"
                   class="form-control"
                   required
                   value="{{ ticket.telefono_cliente if ticket else '' }}">
        </div>

        <div class="form-group">
            <label>Correo Cliente</label>
            <input type="email"
                   name="correo_cliente"
                   class="form-control"
                   required
                   value="{{ ticket.correo_cliente if ticket else '' }}">
        </div>

        <!-- CLASIFICACIÓN -->
        <div class="form-group">
            <label>Tipo de Problema</label>
            <select name="tipo_problema" class="form-control" required>
                <option value="Hardware" {% if ticket and ticket.tipo_problema == 'Hardware' %}selected{% endif %}>Hardware</option>
                <option value="Movil" {% if ticket and ticket.tipo_problema == 'Movil' %}selected{% endif %}>Móvil</option>
                <option value="Red" {% if ticket and ticket.tipo_problema == 'Red' %}selected{% endif %}>Red</option>
                <option value="Otro" {% if ticket and ticket.tipo_problema == 'Otro' %}selected{% endif %}>Otro</option>
            </select>
        </div>

        <div class="form-group">
            <label>Fuente del Ticket</label>
            <select name="fuente_ticket" class="form-control" required>
                <option value="Llamada" {% if ticket and ticket.fuente_ticket == 'Llamada' %}selected{% endif %}>Llamada</option>
                <option value="Correo" {% if ticket and ticket.fuente_ticket == 'Correo' %}selected{% endif %}>Correo</option>
                <option value="WebChat" {% if ticket and ticket.fuente_ticket == 'WebChat' %}selected{% endif %}>WebChat</option>
                <option value="Presencial" {% if ticket and ticket.fuente_ticket == 'Presencial' %}selected{% endif %}>Presencial</option>
            </select>
        </div>

        <!-- BOTONES -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                {% if ticket %}Guardar cambios{% else %}Crear Ticket{% endif %}
            </button>

            <a href="{{ url_for('ticket.list_tickets') }}" class="btn btn-secondary">
                Cancelar
            </a>
        </div>

    </form>
</div>
{% endblock %}
