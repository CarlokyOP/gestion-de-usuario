{% extends "base.html" %}

{% block content %}
<div class="container">

    <div class="ticket-detail
        {% if ticket.prioridad == 'Alta' %}ticket-alta
        {% elif ticket.prioridad == 'Media' %}ticket-media
        {% else %}ticket-baja
        {% endif %}">

        <!-- TÍTULO -->
        <h1>{{ ticket.titulo }}</h1>

        <!-- META INFO -->
        <div class="ticket-meta">
            <p><strong>Estado:</strong> {{ ticket.estado }}</p>
            <p><strong>Prioridad:</strong> {{ ticket.prioridad }}</p>
            <p><strong>Fecha:</strong>
                {{ ticket.fecha_creacion.strftime('%d-%m-%Y %H:%M') }}
            </p>
        </div>

        <hr>

        <!-- DESCRIPCIÓN -->
        <p>{{ ticket.descripcion }}</p>

        <hr>

        <!-- DATOS CLIENTE -->
        <h3>Datos del cliente</h3>
        <p><strong>Nombre:</strong> {{ ticket.nombre_cliente }}</p>
        <p><strong>Teléfono:</strong> {{ ticket.telefono_cliente }}</p>
        <p><strong>Correo:</strong> {{ ticket.correo_cliente }}</p>

        <hr>

        <!-- DETALLES TÉCNICOS -->
        <h3>Detalles del ticket</h3>
        <p><strong>Tipo de problema:</strong> {{ ticket.tipo_problema }}</p>
        <p><strong>Fuente:</strong> {{ ticket.fuente_ticket }}</p>

        <!-- ACCIONES -->
        <div class="ticket-actions">
            <a href="{{ url_for('ticket.edit_ticket', ticket_id=ticket.id) }}"
               class="btn btn-edit">
                Editar
            </a>

            <form method="POST"
                  action="{{ url_for('ticket.delete_ticket', ticket_id=ticket.id) }}"
                  style="display:inline;">
                <button type="submit" class="btn btn-delete">
                    Eliminar
                </button>
            </form>

            <a href="{{ url_for('ticket.list_tickets') }}"
               class="btn btn-back">
                ← Volver al listado
            </a>
        </div>

    </div>

</div>
{% endblock %}
